<?xml version="1.0" encoding="utf-8" ?>
<Config>
  <!-- Definitions of namespace prefixes which can be used in SPARQL patterns and conflict resolution settings (optional) -->
  <!-- Prefix definitions are also used in output files. It is recommended to define namespace prefixes here in order to reduce their size. -->
  <Prefixes>
    <Prefix id="rdf" namespace="http://www.w3.org/1999/02/22-rdf-syntax-ns#" />
    <Prefix id="rdfs" namespace="http://www.w3.org/2000/01/rdf-schema#" />
    <Prefix id="xsd" namespace="http://www.w3.org/2001/XMLSchema#" />
    <Prefix id="owl" namespace="http://www.w3.org/2002/07/owl#" />
    <Prefix id="odcs" namespace="http://opendata.cz/infrastructure/odcleanstore/" />
  </Prefixes>
  
  <!-- Definition of data source (required) -->
  <DataSource>
    <!-- Hostname of the SPARQL endpoint -->
    <Param name="host" value="localhost" />
    
    <!-- Port of the SPARQL endpoint -->
    <Param name="port" value="1111" />
    
    <!-- Username for the endpoint -->
    <Param name="username" value="dba" />
    
    <!-- Password for the endpoint -->
    <Param name="password" value="dba" />
  </DataSource>
  
  <!-- Definitions of which data to process (optional) -->
  <SourceDataset>
    <!-- SPARQL group graph pattern which limits payload named graphs from which data to process are obtained;
	     data are loaded also from the related attached graphs;
	     attribute var specifies which variable in the pattern represents the payload graph;
		 optional (if not given, all payload & attached graphs are processed) -->
    <GraphsRestriction var="g">
      ?g odcs:isLatestUpdate ?a FILTER(?a = 1)
    </GraphsRestriction>
    
    <!-- SPARQL group graph pattern which specifies additional named graphs from which owl:sameAs links are loaded;
	     owl:sameAs links are considered in conflict resolution but contents are not included in the output;
	     attribute var specifies which variable in the pattern represents the named graph;
		optional -->
    <OntologyRestriction var="g">
      ?g odcs:generatedGraph ?a
    </OntologyRestriction>
    
    <!-- SPARQL group graph pattern giving seed resources for transitive traversal of triples;
	     the output will include triples having matching resources as their subjects and
		 triples transitively reachable from there;
		 attribute var specifies which variable in the pattern represents the seed resource;
		 optional (if not given, all triples from source graphs are processed) -->
    <SeedResourceRestriction var="s">
      ?s rdf:type &lt;http://purl.org/procurement/public-contracts#Contract&gt; 
    </SeedResourceRestriction>
  </SourceDataset>
  
  <!-- Definition of conflict resolution settings (optional) -->
  <ConflictResolution>
    <!-- General parameters (optional) -->
    <Params>
      <!-- Path to file where all canonical URIs after conflict resolution are written, one URI per line (optional) -->
      <Param name="canonicalUriOutputFile" value="canonicalUris.txt" />
      
      <!-- Path to file which contains URIs preferred for canonical URIs, one URI per line (optional) -->
      <Param name="canonicalUriInputFile" value="canonicalUris.txt" />
      
      <!-- If set to true, enables file cache for objects needed by the algorithm that may not fit in the memory;
           disabling this option increases performance but may cause OutOfMemory errors; (optional, defaults to true) -->
      <Param name="enableFileCache" value="true" />
    </Params>
    
    <!-- Default aggregation settings; (optional) -->
    <DefaultAggregation>
      <!-- Default value of the multivalue parameter; (optional, defaults to true) -->
      <Param name="defaultMultivalue" value="true"/>
      
      <!-- Default aggregation method; (optional, defaults to ALL) -->
      <Param name="defaultAggregation" value="ALL" />
      
      <!-- Default aggregation error strategy; possible values are 'IGNORE' and 'RETURN_ALL'; (optional, defaults to RETURN_ALL) -->
      <Param name="aggregationErrorStrategy" value="RETURN_ALL" />
    </DefaultAggregation>
    
    <!-- Per-property aggregation settings (optional) -->
    <PropertyAggregations>
      <!-- <Aggregation> elements specify an aggregation policy, where 'type' attribute defines the aggregation method,
           'multivalue' attribute defines the multivalue parameter (both attributes are optional);
           <Property id="..."> subelements define the properties to which the policy applies -->
      <Aggregation type="BEST">
        <Property id="rdfs:label"/>
      </Aggregation>
      <Aggregation type="AVG" multivalue="false">
        <Property id="http://rdf.freebase.com/ns/location.geocode.longtitude"/>
        <Property id="http://rdf.freebase.com/ns/location.geocode.latitude" />
      </Aggregation>
    </PropertyAggregations>
  </ConflictResolution>
  
  <!-- Definition of where the output shall be written (required) -->
  <Outputs>
    <!-- Definition of output to a file (currently the only supported output type) -->
    <Output type="file">
      <!-- Path to the output file (required) -->
      <Param name="file" value="out.n3"/>
      
      <!-- Format of the output file; accepted values are 'ntriples' and 'rdf/xml'; (required) -->
      <Param name="format" value="ntriples"/>
      
      <!-- If set, output will be split into files with the given maximum size in megabytes; n-th file will have suffix -n; (optional) -->
      <Param name="splitByMB" value="200"/>
      
      <!-- Path to file where owl:sameAs links used in conflict resolution shall be written (optional) -->
      <Param name="sameAsFile" value="sameAsLinks.n3"/>
    </Output>
  </Outputs>
</Config>
